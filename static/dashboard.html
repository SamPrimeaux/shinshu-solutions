<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overview - Shinshu Admin</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link rel="icon" type="image/png"
        href="https://pub-c341cc62c3274ccba5aa77286b26fb90.r2.dev/iconography/shinshu-solutions-icon.png">
    <link rel="stylesheet" href="/dash-style.css">
</head>

<body>

    <script src="/dash-sidebar.js"></script>
    <script>renderSidebar('overview');</script>

    <main>
        <header>
            <h2>Dashboard Overview</h2>
            <div style="font-size: 0.9rem; color: #666;">Welcome back to Shinshu Solutions</div>
        </header>

        <div
            style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 1.5rem; margin-bottom: 3rem;">
            <div class="card" style="border-left: 4px solid var(--primary);">
                <h3
                    style="margin: 0 0 0.5rem; font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">
                    Total Assets</h3>
                <p style="font-size: 2.5rem; font-weight: 600; margin: 0; color: var(--text-main);" id="stat-assets">-
                </p>
                <div style="margin-top: 1rem; font-size: 0.85rem; color: var(--primary); cursor: pointer;"
                    onclick="window.location.href='/dashboard-media.html'">Manage Library &rarr;</div>
            </div>

            <div class="card" style="border-left: 4px solid #3B82F6;">
                <h3
                    style="margin: 0 0 0.5rem; font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">
                    New Messages</h3>
                <p style="font-size: 2.5rem; font-weight: 600; margin: 0; color: var(--text-main);" id="stat-messages">-
                </p>
                <div style="margin-top: 1rem; font-size: 0.85rem; color: #3B82F6; cursor: pointer;"
                    onclick="window.location.href='/dashboard-inbox.html'">View Inbox &rarr;</div>
            </div>

            <div class="card" style="border-left: 4px solid #10B981;">
                <h3
                    style="margin: 0 0 0.5rem; font-size: 0.9rem; color: var(--text-muted); text-transform: uppercase; letter-spacing: 0.05em;">
                    System Status</h3>
                <div style="display: flex; align-items: center; gap: 8px; margin-top: 0.5rem;">
                    <span
                        style="width: 12px; height: 12px; background: #10B981; border-radius: 50%; box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.2);"></span>
                    <span style="font-weight: 600; font-size: 1.2rem;">Operational</span>
                </div>
                <div style="margin-top: 1.3rem; font-size: 0.85rem; color: #10B981;">All systems online</div>
            </div>
        </div>

        <div class="card">
            <h3 style="margin-bottom: 1.5rem;">Quick Actions</h3>
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button class="btn btn-outline" onclick="window.location.href='/dashboard-content.html'">Edit Website
                    Text</button>
                <button class="btn btn-outline" onclick="window.location.href='/dashboard-media.html'">Upload New
                    Images</button>
                <button class="btn btn-outline" onclick="window.open('/', '_blank')">View Live Site</button>
            </div>
        </div>

    </main>

    <script>
        document.addEventListener('DOMContentLoaded', async () => {
            const user = await checkAuth();
            if (!user) return;
            loadStats();
        });

        async function loadStats() {
            try {
                const [resAssets, resMessages] = await Promise.all([
                    fetch('/api/assets'),
                    fetch('/api/messages')
                ]);

                const dataAssets = await resAssets.json();
                const dataMessages = await resMessages.json();

                if (dataAssets.success) {
                    document.getElementById('stat-assets').innerText = dataAssets.assets.length;
                }

                if (dataMessages.success) {
                    const unread = dataMessages.messages.filter(m => m.status === 'unread').length;
                    document.getElementById('stat-messages').innerText = unread > 0 ? unread : '0';
                }
            } catch (e) { console.error(e); }
        }
    </script>
</body>

</html>